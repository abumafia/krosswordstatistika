<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hududlar bo'yicha investitsiyalar statistikasi - Interaktiv Krossvord</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Rubik', sans-serif;
        }
        
        :root {
            --primary: #1a73e8;
            --secondary: #34a853;
            --accent: #fbbc05;
            --dark: #202124;
            --light: #f8f9fa;
            --gray: #5f6368;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        body {
            background-color: #f0f7ff;
            color: var(--dark);
            line-height: 1.6;
            padding: 20px;
            background-image: linear-gradient(120deg, #f0f7ff 0%, #e8f0fe 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary), #0d5bb5);
            color: white;
            border-radius: 16px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
            animation: fadeInDown 1s ease-out;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 30px 30px;
            animation: float 20s linear infinite;
            z-index: 0;
        }
        
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        
        header p {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }
        
        .content-wrapper {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .crossword-section {
            flex: 1;
            min-width: 300px;
            background-color: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: var(--shadow);
            animation: fadeInLeft 1s ease-out;
        }
        
        .info-section {
            flex: 1;
            min-width: 300px;
            background-color: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: var(--shadow);
            animation: fadeInRight 1s ease-out;
        }
        
        .section-title {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--accent);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title i {
            font-size: 1.5rem;
        }
        
        .crossword-container {
            margin: 20px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .crossword-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            grid-gap: 3px;
            margin-bottom: 30px;
            background-color: var(--light);
            padding: 10px;
            border-radius: 10px;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
        }
        
        .crossword-cell {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: white;
            border: 1px solid #ddd;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            border-radius: 5px;
        }
        
        .crossword-cell:hover {
            transform: scale(1.05);
            box-shadow: 0 0 8px rgba(0,0,0,0.1);
            background-color: #f0f7ff;
        }
        
        .crossword-cell.filled {
            background-color: #e8f0fe;
            border-color: var(--primary);
        }
        
        .crossword-cell.active {
            background-color: #d2e3fc;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(26, 115, 232, 0.3);
        }
        
        .cell-number {
            position: absolute;
            top: 2px;
            left: 2px;
            font-size: 0.7rem;
            color: var(--primary);
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-top: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .clue-section {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }
        
        .clue-list {
            flex: 1;
            min-width: 250px;
        }
        
        .clue-list h4 {
            color: var(--secondary);
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .clue-item {
            margin-bottom: 8px;
            padding: 8px;
            background-color: #f8f9fa;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .clue-item:hover {
            background-color: #e8f0fe;
            transform: translateX(5px);
        }
        
        .clue-item.active {
            background-color: #d2e3fc;
            border-left: 4px solid var(--primary);
        }
        
        .clue-number {
            display: inline-block;
            width: 25px;
            font-weight: bold;
            color: var(--primary);
        }
        
        .info-points {
            margin-top: 20px;
        }
        
        .info-point {
            padding: 15px;
            margin-bottom: 15px;
            background-color: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid var(--accent);
            transition: all 0.3s ease;
        }
        
        .info-point:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .info-point h4 {
            color: var(--primary);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #e8f0fe, #f0f7ff);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .btn {
            padding: 12px 24px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn:hover {
            background-color: #0d5bb5;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(26, 115, 232, 0.3);
        }
        
        .btn-secondary {
            background-color: var(--secondary);
        }
        
        .btn-secondary:hover {
            background-color: #2d8e47;
        }
        
        .btn-accent {
            background-color: var(--accent);
            color: var(--dark);
        }
        
        .btn-accent:hover {
            background-color: #e0a800;
        }
        
        .input-container {
            display: flex;
            flex-direction: column;
            margin-top: 20px;
        }
        
        .input-container label {
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--gray);
        }
        
        .input-container input {
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .input-container input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.2);
        }
        
        .result-message {
            margin-top: 15px;
            padding: 12px;
            border-radius: 8px;
            font-weight: 600;
            text-align: center;
            display: none;
            animation: fadeIn 0.5s ease-out;
        }
        
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            color: var(--gray);
            border-top: 1px solid #e0e0e0;
        }
        
        .completion-animation {
            display: none;
            text-align: center;
            margin-top: 30px;
            animation: fadeIn 1s ease-out;
        }
        
        .confetti {
            position: relative;
            width: 100%;
            height: 100px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeInLeft {
            from { opacity: 0; transform: translateX(-30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes fadeInRight {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(-15px, -15px) rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            .content-wrapper {
                flex-direction: column;
            }
            
            .crossword-grid {
                grid-template-columns: repeat(10, 1fr);
            }
            
            .crossword-cell {
                width: 32px;
                height: 32px;
                font-size: 0.9rem;
            }
            
            header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-chart-line"></i> Hududlar bo'yicha investitsiyalarni statistik o'rganish</h1>
            <p>Interaktiv krossvord orqali O'zbekiston hududlari investitsiya faoliyati haqida bilimlaringizni sinab ko'ring</p>
        </header>
        
        <div class="content-wrapper">
            <div class="crossword-section">
                <h2 class="section-title"><i class="fas fa-crosshairs"></i> Investitsiyalar krossvordi</h2>
                
                <div class="crossword-container">
                    <div class="crossword-grid" id="crosswordGrid">
                        <!-- Krossvord kataklari JavaScript orqali yaratiladi -->
                    </div>
                    
                    <div class="controls">
                        <button class="btn" id="checkBtn">
                            <i class="fas fa-check-circle"></i> Javoblarni tekshirish
                        </button>
                        <button class="btn btn-secondary" id="hintBtn">
                            <i class="fas fa-lightbulb"></i> Maslahat olish
                        </button>
                        <button class="btn btn-accent" id="resetBtn">
                            <i class="fas fa-redo"></i> Qayta boshlash
                        </button>
                    </div>
                    
                    <div class="input-container">
                        <label for="answerInput" id="currentClueLabel">1-o'ng. O'zbekistonning eng katta investitsiya markazi</label>
                        <input type="text" id="answerInput" placeholder="Javobingizni kiriting..." maxlength="15">
                    </div>
                    
                    <div class="result-message" id="resultMessage"></div>
                    
                    <div class="completion-animation" id="completionAnimation">
                        <div class="confetti">
                            <!-- Konfetti animatsiyasi JavaScript orqali yaratiladi -->
                        </div>
                        <h3><i class="fas fa-trophy"></i> Tabriklaymiz! Barcha savollarga to'g'ri javob berdingiz!</h3>
                        <p>O'zbekiston hududlari investitsiyalari bo'yicha bilimingiz a'lo darajada!</p>
                    </div>
                </div>
            </div>
            
            <div class="info-section">
                <h2 class="section-title"><i class="fas fa-info-circle"></i> Hududlar investitsiyalari statistikasi</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">10+</div>
                        <div class="stat-label">Hududlar</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">6</div>
                        <div class="stat-label">Asosiy ko'rsatkich</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">7</div>
                        <div class="stat-label">Investitsiya tendensiyasi</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">3</div>
                        <div class="stat-label">Davlat siyosati</div>
                    </div>
                </div>
                
                <div class="clue-section">
                    <div class="clue-list">
                        <h4><i class="fas fa-arrow-right"></i> O'ng tomonga</h4>
                        <div id="acrossClues">
                            <!-- O'ng tomonga savollar JavaScript orqali yaratiladi -->
                        </div>
                    </div>
                    
                    <div class="clue-list">
                        <h4><i class="fas fa-arrow-down"></i> Pastga</h4>
                        <div id="downClues">
                            <!-- Pastga savollar JavaScript orqali yaratiladi -->
                        </div>
                    </div>
                </div>
                
                <div class="info-points">
                    <h3 class="section-title"><i class="fas fa-chart-bar"></i> Asosiy ma'lumotlar</h3>
                    
                    <div class="info-point">
                        <h4><i class="fas fa-map-marked-alt"></i> Hududlar kesimida investitsiya tendensiyalari</h4>
                        <p>So'nggi yillarda O'zbekistonda Toshkent shahri eng katta investitsiya markazi, Navoiy viloyati tog'-kon sanoati, Buxoro va Qashqadaryo neft-gaz sanoati, Farg'ona vodiysi avtomobilsozlik va kimyo sanoati yo'nalishlarida investitsiyalarni jalb qilmoqda.</p>
                    </div>
                    
                    <div class="info-point">
                        <h4><i class="fas fa-balance-scale"></i> Investitsiya taqsimotidagi muammolar</h4>
                        <p>Ayrim viloyatlarda (Surxondaryo, Jizzax, Sirdaryo) investitsiya hajmi Toshkent shahri yoki Navoiy viloyatiga nisbatan ancha past. Hududlar o'rtasidagi nomutanosiblik aholining ijtimoiy-iqtisodiy sharoitida farqlarni kuchaytiradi.</p>
                    </div>
                    
                    <div class="info-point">
                        <h4><i class="fas fa-flag"></i> Davlat siyosati</h4>
                        <p>Har yili qabul qilinadigan Davlat investitsiya dasturlarida hududlar bo'yicha yirik infratuzilma loyihalari belgilab beriladi. Kamroq investitsiya jalb qilayotgan hududlarda imtiyozlar (soliq yengilliklari, bojxona imtiyozlari) beriladi.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Â© 2025 O'zbekiston investitsiya statistikasi. Ma'lumotlar O'zbekiston Respublikasi statistika qo'mitasi ma'lumotlari asosida tayyorlangan.</p>
            <p><i class="fas fa-graduation-cap"></i> Interaktiv o'quv vositasi</p>
            <p href="https://t.me/hallaym"><i class="fas fa-puls"></i><a href="https://t.me/hallaym">HALLAYM LLC</a></p>
        </footer>
    </div>

    <script>
        // Krossvord ma'lumotlari
        const crosswordData = {
            title: "Hududlar investitsiyalari",
            gridSize: 10,
            acrossClues: [
                {number: 1, clue: "O'zbekistonning eng katta investitsiya markazi", answer: "TOSHKENT", row: 0, col: 0},
                {number: 4, clue: "Tog'-kon sanoati va oltin qazib olish bilan ajralib turadigan viloyat", answer: "NAVOIY", row: 2, col: 0},
                {number: 7, clue: "Neft-gaz sanoati va yoqilg'i energetika loyihalariga katta mablag' yo'naltiriladigan viloyat", answer: "BUXORO", row: 4, col: 0},
                {number: 9, clue: "Avtomobilsozlik, kimyo sanoati va qishloq xo'jaligi mahsulotlarini qayta ishlashda katta investitsiyalar jalb qiladigan viloyat", answer: "ANDIJON", row: 6, col: 0},
                {number: 11, clue: "Turizm sohasida investitsiya loyihalari faollashayotgan tarixiy viloyat", answer: "SAMARQAND", row: 8, col: 0}
            ],
            downClues: [
                {number: 2, clue: "Transport-logistika markazi sifatida ko'plab xorijiy investitsiyalarni jalb qiladigan viloyat", answer: "TOSHKENTVILOYATI", row: 0, col: 2},
                {number: 3, clue: "Neft-gaz sanoati bilan ajralib turadigan viloyat", answer: "QASHQADARYO", row: 0, col: 4},
                {number: 5, clue: "Qishloq xo'jaligi, suv xo'jaligi va ekologik loyihalarga investitsiyalar yo'naltiriladigan muxtor respublika", answer: "QORAQALPOGISTON", row: 0, col: 6},
                {number: 6, clue: "Turizm sohasida investitsiyalar o'sayotgan viloyat", answer: "XORAZM", row: 0, col: 8},
                {number: 8, clue: "Farg'ona vodiysidagi, kimyo sanoati rivojlangan viloyat", answer: "NAMANGAN", row: 3, col: 9},
                {number: 10, clue: "Investitsiyalar hajmi nisbatan past bo'lgan viloyat", answer: "SURXONDARYO", row: 6, col: 5}
            ]
        };

        // Krossvord kataklarini yaratish
        const crosswordGrid = document.getElementById('crosswordGrid');
        const acrossCluesDiv = document.getElementById('acrossClues');
        const downCluesDiv = document.getElementById('downClues');
        const answerInput = document.getElementById('answerInput');
        const currentClueLabel = document.getElementById('currentClueLabel');
        const resultMessage = document.getElementById('resultMessage');
        const checkBtn = document.getElementById('checkBtn');
        const hintBtn = document.getElementById('hintBtn');
        const resetBtn = document.getElementById('resetBtn');
        const completionAnimation = document.getElementById('completionAnimation');
        const confettiDiv = document.querySelector('.confetti');

        let selectedCell = null;
        let selectedDirection = 'across'; // 'across' yoki 'down'
        let currentClueIndex = 0;
        let userAnswers = {};
        let totalCorrect = 0;
        
        // Krossvord kataklarini yaratish
        function createCrosswordGrid() {
            crosswordGrid.innerHTML = '';
            
            // Barcha kataklar uchun bo'sh massiv
            const grid = Array(crosswordData.gridSize).fill().map(() => Array(crosswordData.gridSize).fill(null));
            
            // O'ng tomonga so'zlarni joylashtirish
            crosswordData.acrossClues.forEach(clue => {
                for (let i = 0; i < clue.answer.length; i++) {
                    if (clue.row < crosswordData.gridSize && clue.col + i < crosswordData.gridSize) {
                        grid[clue.row][clue.col + i] = {
                            letter: clue.answer[i],
                            number: clue.number,
                            acrossClue: clue.number,
                            downClue: null
                        };
                    }
                }
            });
            
            // Pastga so'zlarni joylashtirish
            crosswordData.downClues.forEach(clue => {
                for (let i = 0; i < clue.answer.length; i++) {
                    if (clue.row + i < crosswordData.gridSize && clue.col < crosswordData.gridSize) {
                        // Agar katak allaqachon mavjud bo'lsa, faqat downClue qo'shamiz
                        if (grid[clue.row + i][clue.col]) {
                            grid[clue.row + i][clue.col].downClue = clue.number;
                        } else {
                            grid[clue.row + i][clue.col] = {
                                letter: clue.answer[i],
                                number: clue.number,
                                acrossClue: null,
                                downClue: clue.number
                            };
                        }
                    }
                }
            });
            
            // Kataklarni DOMga qo'shish
            for (let row = 0; row < crosswordData.gridSize; row++) {
                for (let col = 0; col < crosswordData.gridSize; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'crossword-cell';
                    cell.dataset.row = row;
                    cell.dataset.col = col;
                    
                    // Agar katakda harf bo'lsa
                    if (grid[row][col]) {
                        cell.dataset.letter = grid[row][col].letter;
                        cell.dataset.number = grid[row][col].number;
                        cell.dataset.acrossClue = grid[row][col].acrossClue;
                        cell.dataset.downClue = grid[row][col].downClue;
                        
                        // Katak raqamini ko'rsatish
                        const numberSpan = document.createElement('span');
                        numberSpan.className = 'cell-number';
                        numberSpan.textContent = grid[row][col].number;
                        cell.appendChild(numberSpan);
                        
                        // Foydalanuvchi kiritgan harfni ko'rsatish uchun joy
                        const letterSpan = document.createElement('span');
                        letterSpan.className = 'cell-letter';
                        letterSpan.id = `cell-${row}-${col}`;
                        cell.appendChild(letterSpan);
                    } else {
                        // Bo'sh katak (to'ldirilmaydigan)
                        cell.style.backgroundColor = '#f5f5f5';
                        cell.style.cursor = 'default';
                    }
                    
                    cell.addEventListener('click', () => handleCellClick(row, col, grid[row][col]));
                    crosswordGrid.appendChild(cell);
                }
            }
            
            // Savollarni yaratish
            createClueLists();
            
            // Dastlabki savolni ko'rsatish
            updateCurrentClue();
        }
        
        // Savollar ro'yxatini yaratish
        function createClueLists() {
            acrossCluesDiv.innerHTML = '';
            downCluesDiv.innerHTML = '';
            
            // O'ng tomonga savollar
            crosswordData.acrossClues.forEach(clue => {
                const clueItem = document.createElement('div');
                clueItem.className = 'clue-item';
                clueItem.innerHTML = `<span class="clue-number">${clue.number}</span>. ${clue.clue}`;
                clueItem.dataset.clueNumber = clue.number;
                clueItem.dataset.direction = 'across';
                
                clueItem.addEventListener('click', () => {
                    selectClue(clue.number, 'across');
                });
                
                acrossCluesDiv.appendChild(clueItem);
            });
            
            // Pastga savollar
            crosswordData.downClues.forEach(clue => {
                const clueItem = document.createElement('div');
                clueItem.className = 'clue-item';
                clueItem.innerHTML = `<span class="clue-number">${clue.number}</span>. ${clue.clue}`;
                clueItem.dataset.clueNumber = clue.number;
                clueItem.dataset.direction = 'down';
                
                clueItem.addEventListener('click', () => {
                    selectClue(clue.number, 'down');
                });
                
                downCluesDiv.appendChild(clueItem);
            });
        }
        
        // Katakni bosishni boshqarish
        function handleCellClick(row, col, cellData) {
            if (!cellData) return; // Bo'sh katakni bosishga yo'l qo'ymaslik
            
            // Avvalgi tanlangan katakni normal holatga o'tkazish
            if (selectedCell) {
                selectedCell.classList.remove('active');
            }
            
            // Yangi katakni tanlash
            selectedCell = document.querySelector(`.crossword-cell[data-row="${row}"][data-col="${col}"]`);
            selectedCell.classList.add('active');
            
            // Yo'nalishni aniqlash
            if (cellData.acrossClue && cellData.downClue) {
                // Agar ikkala yo'nalishda ham savol bo'lsa, avvalgi yo'nalishni saqlash
                // Yoki foydalanuvchi tanlagan yo'nalishga o'tish
                const acrossClueItem = document.querySelector(`.clue-item[data-clue-number="${cellData.acrossClue}"][data-direction="across"]`);
                const downClueItem = document.querySelector(`.clue-item[data-clue-number="${cellData.downClue}"][data-direction="down"]`);
                
                if (selectedDirection === 'across' && acrossClueItem) {
                    selectClue(cellData.acrossClue, 'across');
                } else if (selectedDirection === 'down' && downClueItem) {
                    selectClue(cellData.downClue, 'down');
                }
            } else if (cellData.acrossClue) {
                selectClue(cellData.acrossClue, 'across');
            } else if (cellData.downClue) {
                selectClue(cellData.downClue, 'down');
            }
            
            // Input maydoniga fokus
            answerInput.focus();
        }
        
        // Savolni tanlash
        function selectClue(clueNumber, direction) {
            selectedDirection = direction;
            currentClueIndex = direction === 'across' 
                ? crosswordData.acrossClues.findIndex(clue => clue.number == clueNumber)
                : crosswordData.downClues.findIndex(clue => clue.number == clueNumber);
            
            // Barcha savol elementlaridan active classini olib tashlash
            document.querySelectorAll('.clue-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Tanlangan savol elementiga active classini qo'shish
            const selectedClueItem = document.querySelector(`.clue-item[data-clue-number="${clueNumber}"][data-direction="${direction}"]`);
            if (selectedClueItem) {
                selectedClueItem.classList.add('active');
            }
            
            // Joriy savolni ko'rsatish
            updateCurrentClue();
            
            // Tanlangan katakni topish va uni faollashtirish
            let targetCell = null;
            if (direction === 'across') {
                const clue = crosswordData.acrossClues.find(c => c.number == clueNumber);
                if (clue) {
                    targetCell = document.querySelector(`.crossword-cell[data-row="${clue.row}"][data-col="${clue.col}"]`);
                }
            } else {
                const clue = crosswordData.downClues.find(c => c.number == clueNumber);
                if (clue) {
                    targetCell = document.querySelector(`.crossword-cell[data-row="${clue.row}"][data-col="${clue.col}"]`);
                }
            }
            
            if (targetCell) {
                // Avvalgi tanlangan katakni normal holatga o'tkazish
                if (selectedCell) {
                    selectedCell.classList.remove('active');
                }
                
                // Yangi katakni tanlash
                selectedCell = targetCell;
                selectedCell.classList.add('active');
            }
        }
        
        // Joriy savolni yangilash
        function updateCurrentClue() {
            let clueText = '';
            
            if (selectedDirection === 'across') {
                const clue = crosswordData.acrossClues[currentClueIndex];
                if (clue) {
                    clueText = `${clue.number}-o'ng. ${clue.clue}`;
                }
            } else {
                const clue = crosswordData.downClues[currentClueIndex];
                if (clue) {
                    clueText = `${clue.number}-pastga. ${clue.clue}`;
                }
            }
            
            currentClueLabel.textContent = clueText;
            answerInput.value = '';
            
            // Foydalanuvchi kiritgan javobni ko'rsatish
            const clueNumber = selectedDirection === 'across' 
                ? crosswordData.acrossClues[currentClueIndex].number 
                : crosswordData.downClues[currentClueIndex].number;
                
            const answerKey = `${selectedDirection}_${clueNumber}`;
            if (userAnswers[answerKey]) {
                answerInput.value = userAnswers[answerKey];
            }
        }
        
        // Javoblarni tekshirish
        function checkAnswer() {
            if (!selectedDirection || currentClueIndex === null) {
                showResultMessage("Iltimos, avval savol tanlang!", "error");
                return;
            }
            
            const userAnswer = answerInput.value.trim().toUpperCase();
            if (!userAnswer) {
                showResultMessage("Iltimos, javob kiriting!", "error");
                return;
            }
            
            let correctAnswer = '';
            let clueNumber = 0;
            let startRow = 0, startCol = 0;
            
            if (selectedDirection === 'across') {
                const clue = crosswordData.acrossClues[currentClueIndex];
                correctAnswer = clue.answer;
                clueNumber = clue.number;
                startRow = clue.row;
                startCol = clue.col;
            } else {
                const clue = crosswordData.downClues[currentClueIndex];
                correctAnswer = clue.answer;
                clueNumber = clue.number;
                startRow = clue.row;
                startCol = clue.col;
            }
            
            // Javobni saqlash
            const answerKey = `${selectedDirection}_${clueNumber}`;
            userAnswers[answerKey] = userAnswer;
            
            // Javobni kataklarga yozish
            if (selectedDirection === 'across') {
                for (let i = 0; i < userAnswer.length; i++) {
                    const cell = document.querySelector(`.crossword-cell[data-row="${startRow}"][data-col="${startCol + i}"]`);
                    if (cell) {
                        const letterSpan = cell.querySelector('.cell-letter');
                        letterSpan.textContent = userAnswer[i];
                        cell.classList.add('filled');
                        
                        // Harf to'g'ri yoki noto'g'riligini tekshirish
                        const correctLetter = correctAnswer[i];
                        if (userAnswer[i] === correctLetter) {
                            letterSpan.style.color = '#34a853';
                        } else {
                            letterSpan.style.color = '#ea4335';
                        }
                    }
                }
            } else {
                for (let i = 0; i < userAnswer.length; i++) {
                    const cell = document.querySelector(`.crossword-cell[data-row="${startRow + i}"][data-col="${startCol}"]`);
                    if (cell) {
                        const letterSpan = cell.querySelector('.cell-letter');
                        letterSpan.textContent = userAnswer[i];
                        cell.classList.add('filled');
                        
                        // Harf to'g'ri yoki noto'g'riligini tekshirish
                        const correctLetter = correctAnswer[i];
                        if (userAnswer[i] === correctLetter) {
                            letterSpan.style.color = '#34a853';
                        } else {
                            letterSpan.style.color = '#ea4335';
                        }
                    }
                }
            }
            
            // Javobni tekshirish
            if (userAnswer === correctAnswer) {
                showResultMessage("To'g'ri javob! Tabriklaymiz!", "success");
                totalCorrect++;
                
                // Agar barcha savollarga javob berilgan bo'lsa
                const totalClues = crosswordData.acrossClues.length + crosswordData.downClues.length;
                if (totalCorrect === totalClues) {
                    showCompletionAnimation();
                }
                
                // Keyingi savolga o'tish
                setTimeout(() => {
                    if (selectedDirection === 'across') {
                        if (currentClueIndex < crosswordData.acrossClues.length - 1) {
                            selectClue(crosswordData.acrossClues[currentClueIndex + 1].number, 'across');
                        } else if (crosswordData.downClues.length > 0) {
                            selectClue(crosswordData.downClues[0].number, 'down');
                        }
                    } else {
                        if (currentClueIndex < crosswordData.downClues.length - 1) {
                            selectClue(crosswordData.downClues[currentClueIndex + 1].number, 'down');
                        } else if (crosswordData.acrossClues.length > 0) {
                            selectClue(crosswordData.acrossClues[0].number, 'across');
                        }
                    }
                }, 1000);
            } else {
                showResultMessage(`Noto'g'ri javob. To'g'ri javob: ${correctAnswer}`, "error");
            }
        }
        
        // Maslahat olish
        function giveHint() {
            if (!selectedDirection || currentClueIndex === null) {
                showResultMessage("Iltimos, avval savol tanlang!", "error");
                return;
            }
            
            let correctAnswer = '';
            if (selectedDirection === 'across') {
                correctAnswer = crosswordData.acrossClues[currentClueIndex].answer;
            } else {
                correctAnswer = crosswordData.downClues[currentClueIndex].answer;
            }
            
            // Bir harfni ochish
            const currentAnswer = answerInput.value.trim().toUpperCase();
            for (let i = 0; i < correctAnswer.length; i++) {
                if (i >= currentAnswer.length || currentAnswer[i] !== correctAnswer[i]) {
                    const newAnswer = currentAnswer + correctAnswer[i];
                    answerInput.value = newAnswer;
                    break;
                }
            }
            
            showResultMessage("Bir harf ochildi!", "success");
        }
        
        // Natija xabarini ko'rsatish
        function showResultMessage(message, type) {
            resultMessage.textContent = message;
            resultMessage.className = `result-message ${type}`;
            resultMessage.style.display = 'block';
            
            // 3 soniyadan keyin xabarni yashirish
            setTimeout(() => {
                resultMessage.style.display = 'none';
            }, 3000);
        }
        
        // Krossvordni qayta boshlash
        function resetCrossword() {
            userAnswers = {};
            totalCorrect = 0;
            
            // Barcha kataklarni tozalash
            document.querySelectorAll('.crossword-cell').forEach(cell => {
                cell.classList.remove('filled', 'active');
                const letterSpan = cell.querySelector('.cell-letter');
                if (letterSpan) {
                    letterSpan.textContent = '';
                    letterSpan.style.color = '';
                }
            });
            
            // Input maydonini tozalash
            answerInput.value = '';
            
            // Natija xabarini yashirish
            resultMessage.style.display = 'none';
            
            // Tugallangan animatsiyani yashirish
            completionAnimation.style.display = 'none';
            
            // Birinchi savolni tanlash
            selectClue(crosswordData.acrossClues[0].number, 'across');
            
            showResultMessage("Krossvord qayta boshlandi!", "success");
        }
        
        // Krossvord tugallanganligini ko'rsatish
        function showCompletionAnimation() {
            completionAnimation.style.display = 'block';
            
            // Konfetti animatsiyasini yaratish
            createConfetti();
        }
        
        // Konfetti animatsiyasi
        function createConfetti() {
            confettiDiv.innerHTML = '';
            const colors = ['#34a853', '#1a73e8', '#fbbc05', '#ea4335', '#9c27b0'];
            
            for (let i = 0; i < 50; i++) {
                const confettiPiece = document.createElement('div');
                confettiPiece.style.position = 'absolute';
                confettiPiece.style.width = '10px';
                confettiPiece.style.height = '10px';
                confettiPiece.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confettiPiece.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                confettiPiece.style.left = `${Math.random() * 100}%`;
                confettiPiece.style.top = '-20px';
                confettiPiece.style.opacity = '0.8';
                
                // Animatsiya
                const animation = confettiPiece.animate([
                    { transform: 'translateY(0) rotate(0deg)', opacity: 0.8 },
                    { transform: `translateY(120px) rotate(${Math.random() * 360}deg)`, opacity: 0 }
                ], {
                    duration: 1000 + Math.random() * 1000,
                    delay: Math.random() * 1000,
                    easing: 'cubic-bezier(0.215, 0.61, 0.355, 1)'
                });
                
                confettiDiv.appendChild(confettiPiece);
                
                // Animatsiya tugagach, elementni o'chirish
                animation.onfinish = () => {
                    confettiPiece.remove();
                };
            }
        }
        
        // Input maydoni uchun klaviatura hodisalari
        answerInput.addEventListener('keyup', (e) => {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });
        
        // Tugmalar uchun hodisalar
        checkBtn.addEventListener('click', checkAnswer);
        hintBtn.addEventListener('click', giveHint);
        resetBtn.addEventListener('click', resetCrossword);
        
        // Dasturni ishga tushirish
        document.addEventListener('DOMContentLoaded', () => {
            createCrosswordGrid();
            
            // Birinchi savolni tanlash
            setTimeout(() => {
                selectClue(crosswordData.acrossClues[0].number, 'across');
            }, 500);
        });
    </script>
</body>
</html>
